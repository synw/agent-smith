# Workflows

A workflow is a pipeline of *actions*, *tasks* or *commands* that run in a sequence. It is
is defined in yaml.

Example `features/workflows/commit_msg.yml` workflow that uses
the `features/actions/git_diff.js` action and the `features/tasks/commit_msg.yml` task:

```yaml
title: "Generate a git commit message from a git diff"
steps:
  - action: git_diff
  - task: commit_msg
```

Note: the result of an action or task is passed to the next one, except for the special case of *adaptaters*.

## Adaptaters

An adaptater is a javascript script that manipulates data between
two workflow steps, often to convert data and adapt required formats.

Adaptaters are declared in a `adaptaters`Â folder of a plugin. Example: an
adaptater to parse command line input. The <kbd>q</kbd> wokflow from the
<a href="javascript:openLink('/plugins/inference')">inference plugin</a>.
Workflow:

```yaml
steps:
  - adaptater: prequery
  - task: infer
```

This adaptater parses the command line arguments and dispatch them for the `infer` task
that will run next in the workflow:

```js
// adaptaters/prequery.js
async function action(params, options) {
    const res = { prompt: params.join(" ") };
    return res;
}

export { action }
```

Usage:

```bash
lm q list the planets of the solar systems
# equivalent to the single task:
lm infer "list the planets of the solar systems"
```

<a href="javascript:openLink('/terminal_client/commands')">Next: Commands</a>