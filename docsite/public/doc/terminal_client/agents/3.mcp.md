# Mcp tools

To use mcp servers add them to a task:

```yaml
description: Mcp example
prompt: |-
    {prompt}
ctx: 16384
model:  
  name: qwen4b
  template: chatml-tools
inferParams:
  top_k: 20
  top_p: 0.80
  min_p: 0
  temperature: 0.2
  max_tokens: 8192
mcp:
  sqlite-read:
    command: uvx
    arguments:
      - mcp-server-sqlite
      - "--db-path"
      - ~/.config/agent-smith/cli/config.db
    tools:
      - list_tables
      - describe_table
      - read_query
```

In this example we use a Sqlite tool with a limited set of authorized tools: the
optional "tools" section is a list of authorized tools. If not provided all the tools
from the server will be available.

### Command line parameters

To add command line parameters for a mcp server use the `--mcp` option. Example:

```yaml
# ...
name: fsagent
mcp:
  filesystem:
    command: npx
    arguments:
      - "-y"
      - "@modelcontextprotocol/server-filesystem"
    tools:
      - list_directory
      - read_text_file
      - write_file?
```

This server needs an argument for allowed directories. To specify allowed directories when running the agent:

```bash
lm fsagent "list the files in the current directory" --mcp filesystem:.
```

In this example the agent can only operate in the current directory. To specify multiple directories use multiple
arguments separated by a comma:

```bash
lm fsagent "my prompt here" --mcp filesystem:/path/one,~/path/two
```

For multiple servers:

```bash
lm fsagent "my prompt here" --mcp filesystem:. otherserver:arg1,arg2
```

## Tools execution permissions

A tool is by default executed automatically. To ask user to confirm or deny execution add a `?` mark at the end of the tool name:

```yaml
description: Mcp example
# ...
mcp:
  sqlite-read:
    command: uvx
    arguments:
      - mcp-server-sqlite
      - "--db-path"
      - ~/.config/agent-smith/cli/config.db
    tools:
      - list_tables
      - describe_table
      - read_query
      - write_query?
```

In the example above the `write_query` tool must get the user permission to be executed and the read tools are automatically executed

<a href="javascript:openLink('/plugins')">Next: Plugins</a>