# Tools use

An agent can use tools autonomously or supervised

## Define tools

Create a function for a tool execution:

```js
function get_current_weather(args) {
    console.log("Running the get_current_weather tool with args", args);
    return { "temp": 20.5, "weather": "rain" }
}
```

Create a tool definition:

```js
const weatherToolDef = {
    "name": "get_current_weather",
    "description": "Get the current weather",
    "arguments": {
        "location": {
            "description": "The city and state, e.g. San Francisco, CA"
        }
    },
    "execute": get_current_weather,
};
```

## Configure an agent with tools

Initialize an agent connected to an Openrouter backend:

```js
import { Agent } from "@agent-smith/agent";

const lm = new Lm({
    providerType: "openai",
    serverUrl: "https://openrouter.ai/api/v1",
    apiKey: process.env.OPENROUTER_API_KEY,
    onToken: (t) => process.stdout.write(t),
});
const agent = new Agent(lm);
```

Run the agent:

```js
const _prompt = `I am landing in Barcelona soon: I plan to reach my hotel 
and then go for outdoor sport. How are the conditions in the city?`;

const inferenceParams = {
    stream: true,
    model: { 
        name: "qwen/qwen3-30b-a3b:free",
        ctx: 32768,
    },
    temperature: 0.4,
    top_k: 40,
    top_p: 0.95,
    min_p: 0,
    max_tokens: 16384,
};
const options = {
    debug: true,
    //verbose: true,
    tools: [get_current_weather]
}
await agent.run(_prompt, inferenceParams, options);
```

<a href="javascript:openLink('/libraries/agent/templates')">Next: templates</a>
