# API Documentation

Note: this api doc was generated by an AI

## Usage

```typescript
import { useTmem } from './tmem';

const myStore = useTmem('myStore', { key1: 'value1', key2: 'value2' });
```

## Parameters

- `name` (string): The name of the local storage instance.
- `initial` (Record<string, any>): An object containing initial key-value pairs to be stored in the local storage.
- `verbose` (boolean, optional): If set to true, it will log messages during the initialization process. Default is false.

## Return Value

The function returns an object that conforms to the `Tmem` interface.

## Interface: `Tmem`

The `Tmem` interface defines the methods available for interacting with the local storage.

### Properties

- `db` (LocalForage): The local storage instance.

### Methods

- `init()`: Initializes the local storage with the provided initial data. If the local storage is empty, it will fill it with the initial data.
- `set(k: string, v: any)`: Sets a key-value pair in the local storage.
- `get<T>(k: string)`: Retrieves a value from the local storage by its key. The value is cast to the specified type `T`.
- `del(k: string)`: Deletes a key-value pair from the local storage by its key.
- `keys()`: Returns an array of all keys in the local storage.
- `all<T = any>()`: Returns an object containing all key-value pairs in the local storage. The values are cast to the specified type `T`.

## Methods Details

### `init()`

Initializes the local storage with the provided initial data. If the local storage is empty, it will fill it with the initial data.

### `set(k: string, v: any)`

Sets a key-value pair in the local storage.

- `k` (string): The key for the value.
- `v` (any): The value to be stored.

### `get<T>(k: string)`

Retrieves a value from the local storage by its key.

- `k` (string): The key of the value to retrieve.
- `T` (generic): The type of the value to be retrieved.

### `del(k: string)`

Deletes a key-value pair from the local storage by its key.

- `k` (string): The key of the value to delete.

### `keys()`

Returns an array of all keys in the local storage.

### `all<T = any>()`

Returns an object containing all key-value pairs in the local storage.

- `T` (generic, optional): The type of the values to be retrieved. If not provided, the values will be of type `any`.

## Error Handling

If a key is not found using the `get` method, it will throw an error.

## Notes

- The `db` property of the returned object is the local storage instance, which can be used for more advanced operations provided by the `localForage` library.
- The `init` method should be called before any other methods to ensure the local storage is initialized.
- The `get`, `del`, and `all` methods are asynchronous and return promises.
- The `set` method is also asynchronous and returns a promise.
- The `keys` method is synchronous and returns an array of strings.
- The `all` method is synchronous and returns an object of key-value pairs.
- The `useTmem` function is a factory function that creates a new instance of `Tmem` for each call with different parameters.
- The `verbose` parameter can be used to log messages during the initialization process.

## Example

```typescript
import { useTmem } from './tmem';

const myStore = useTmem('myStore', { key1: 'value1', key2: 'value2' });

myStore.init().then(() => {
    myStore.set('key3', 'value3');
    myStore.get<string>('key1').then(value => {
        console.log(value); // Outputs: 'value1'
    });
    myStore.del('key2');
    myStore.keys().then(keys => {
        console.log(keys); // Outputs: ['key1', 'key3']
    });
    myStore.all<string>().then(allValues => {
        console.log(allValues); // Outputs: { key1: 'value1', key3: 'value3' }
    });
});
```

## Dependencies

- `localForage`: A robust, asynchronous, persistent JavaScript library for the web providing a standardized interface to improve the offline experience of your web applications using asynchronous storage mechanisms.

<a href="javascript:openLink('/semantic_memory/get_started')">Next: semantic memory</a>
