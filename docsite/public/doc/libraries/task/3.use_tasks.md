# Use tasks

## Initialize

Create an agent with a backend

```ts
import { Lm } from "@locallm/api";
import { Agent } from "@agent-smith/agent";

const lm = new Lm({
    providerType: "llamacpp",  // or "koboldcpp", "ollama" or "openai"
    serverUrl: "http://localhost:8080",
    onToken: (t) => process.stdout.write(t),
});
const agent = new Agent(lm);
```

## Read a task

From a file:

```ts
import { default as fs } from "fs";
import { TaskDef} from "@agent-smith/task";

const taskPath = "./tasks/variables.yml";
const ymlTaskDef = fs.readFileSync(taskPath, 'utf8');
const task = new Task(agent, ymlTaskDef);
console.log(task);
```

Or from text:

```ts
const task = new Task.fromYaml(agent, ymlTaskDef as TaskDef);
```

## Run the task

For a simple task:

```yaml
name: test
description: A test task
template: 
    name: mistral
prompt: |-
    {prompt}
model:
    name: mistral:instruct
    ctx: 4092
inferParams:
    top_p: 0.95
    temperature: 0.2
```

Run it and provide the prompt:


```ts
await task.run({
    prompt: "List the planets in the solar system",
});
```

## Abort a task

To abort a running task:

```ts
await task.abort();
```


<a href="javascript:openLink('/libraries/task/models')">Next: models</a>